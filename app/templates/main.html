{% extends 'base.html' %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}
    <div class="media-body">
        <h4 class="text-right">
            <b>The weather is now.</b>
        </h4>
        <p class="text-right">
            <b>Region</b>: {{ context.weather_loc_info.region }}
            <b>Time</b>: {{ context.weather_loc_info.time }}
            <b>Temp</b>: {{ context.weather_info.temperature }}
        </p>
    </div>
    <div class="media-right">
        <img style="width:60px" class="media-object" src="{{ context.weather_info.weather_icons }}" alt="Weather display">
    </div>
    <div class="container-fluid">
        <form class="navbar-form navbar-left" method="post" action="">
            {{ context.form_filter.csrf_token }}
            {{ context.form_filter.main_technology.label }}: {{ context.form_filter.main_technology }}
            {{ context.form_filter.submit }}
        </form>
        <form class="navbar-form navbar-left" method="post" action=''>
            {{ context.form_search.csrf_token }}
            {{ context.form_search.name.label }}: {{ context.form_search.name }}
            {{ context.form_search.last_name.label }}: {{ context.form_search.last_name }}
            {{ context.form_search.submit }}
        </form>

    </div>
    <div class="panel panel-default">
        <table class="table table-hover table-bordered">
            <tr>
                <td>Name</td>
                <td>Last name</td>
                <td>Nickname</td>
                <td>Main technology</td>
                <td>Status</td>
                <td>CV</td>
                <td>User actions</td>
            </tr>
            {% for employee in context.employees.items  %}
            <tr>
                <td>{{ employee.name }}</td>
                <td>{{ employee.last_name }}</td>
                <td>{{ employee.nickname }}</td>
                <td>{{ employee.main_technology }}</td>
                <td>{{ employee.status }}</td>
                <td>{{ employee.employee_data.cv }}</td>
                <td>
                    <form class="form-inline" action="{{ url_for('employee.update_status', employee_id = employee.id) }}" method="post">
                        <button class="btn btn-default">Change status</button>
                    </form>
                    <form class="form-inline" action="{{ url_for('employee.update_user', employee_id = employee.id) }}" method="get">
                        <button class="btn btn-default">Update</button>
                    </form>
                    <form class="form-inline" action="{{ url_for('employee.delete_user', employee_id = employee.id) }}" method="post">
                        <button class="btn btn-default">Delete</button>
                    </form>
                </td>
            </tr>
        {% endfor %}
        </table>
    </div>
    <nav aria-label="...">
            <ul class="pager">
                <li class="previous{% if not context.prev_url %} disabled{% endif %}">
                    <a href="{{ context.prev_url or '#' }}">
                        <span aria-hidden="true">&larr;</span> Previous page
                    </a>
                </li>
                <li class="next{% if not context.next_url %} disabled{% endif %}">
                    <a href="{{ context.next_url or '#' }}">
                        Next page <span aria-hidden="true">&rarr;</span>
                    </a>
                </li>
            </ul>
    </nav>
{% endblock %}